---
title: "Regressionsdiagnostik"
author: "Jan-Philipp Kolb"
date: "4 Mai 2017"
output: 
  beamer_presentation:
    colortheme: beaver
    fig_caption: no
    fonttheme: structurebold
    highlight: espresso
    theme: CambridgeUS
  ioslides_presentation: 
    keep_md: yes
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE,message=F,warning=F,cache=F,eval=F)
```


## Regressionsdiagnostik mit Basis-R

Ein einfaches Modell
```{r}
r
N <- 5
x1 <- rnorm(N)
y <- runif(N)
```

## Regressionsdiagnostik mit Basis-R

```{r}
mod1 <- lm(y~x1)
pre <- predict(mod1)
plot(x1,y)
abline(mod1)
segments(x1, y, x1, pre, col="red")
```


## Das visreg-Paket 

Ein Modell wird auf dem airquality Datensatz geschätzt

```{r}
library(visreg)
fit <- lm(Ozone ~ Solar.R + Wind + Temp, data = airquality)
visreg(fit)
```


## Das visreg-Paket 

Und dann mit visreg visualisiert.

Siehe: http://myweb.uiowa.edu/pbreheny/publications/visreg.pdf

Zweites Argument -  Spezifikation erklärende Variable für Visualisierung

```{r}
visreg(fit, "Wind", type = "contrast")
```


## Das visreg-Paket 

```{r}
visreg(fit, "Wind", type = "conditional")
```

Das Default-Argument für type ist conditional.


## Effekte von Faktoren

Mit visreg können die Effekte bei Faktoren visualisiert werden.

```{r}
airquality$Heat <- cut(airquality$Temp, 3, 
	labels=c("Cool", "Mild", "Hot"))
fit.heat <- lm(Ozone ~ Solar.R + Wind + Heat, 
	data = airquality)
visreg(fit.heat, "Heat", type = "contrast")
visreg(fit.heat, "Heat", type = "conditional")
```

## Das Paket visreg - Interaktionen

```{r}
airquality$Heat <- cut(airquality$Temp, 3, 
labels=c("Cool", "Mild", "Hot"))
fit <- lm(Ozone ~ Solar.R + Wind * Heat, data = airquality)
visreg(fit, "Wind", by = "Heat",layout=c(3,1))
```

## Das Paket visreg - Interaktionen overlay

```{r}
fit <- lm(Ozone ~ Solar.R + Wind * Heat, data = airquality)
visreg(fit, "Wind", by="Heat", overlay=TRUE, partial=FALSE)
```

## Das Paket visreg - surface

```{r}
fit2 <- lm(Ozone ~ Solar.R + Wind * Temp, data = airquality)
visreg2d(fit2, "Wind", "Temp", plot.type = "image")
```

## Das Paket visreg - surface

```{r}
visreg2d(fit2, "Wind", "Temp", plot.type = "persp")
```

